# UniQuest - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìÅ –î–µ—Ä–µ–≤–æ –ø—Ä–æ–µ–∫—Ç–∞

```
uniquest/
‚îú‚îÄ‚îÄ main/                          # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ admin.py                   # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ Django
‚îÇ   ‚îú‚îÄ‚îÄ apps.py                    # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ models.py                  # –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ–ª–Ω—ã–π –∫–æ–¥ –Ω–∏–∂–µ)
‚îÇ   ‚îú‚îÄ‚îÄ views.py                   # –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (views) - –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ forms.py                   # –§–æ—Ä–º—ã –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ urls.py                    # URL –º–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ signals.py                 # –°–∏–≥–Ω–∞–ª—ã Django
‚îÇ   ‚îú‚îÄ‚îÄ search_service.py          # –°–µ—Ä–≤–∏—Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ ml_service.py              # ML —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
‚îÇ   ‚îú‚îÄ‚îÄ templates/                 # HTML —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ base.html
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ login.html
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ register.html
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ dashboard.html
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ profile.html
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ course_detail.html
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ grades.html
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ schedule.html
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ teacher_dashboard.html
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îú‚îÄ‚îÄ static/                    # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (CSS, JS, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ main/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ images/
‚îÇ   ‚îú‚îÄ‚îÄ migrations/                # –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 0001_initial.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 0002_alter_scheduleentry_options...
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îî‚îÄ‚îÄ management/                # –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ commands/
‚îÇ           ‚îú‚îÄ‚îÄ seed_demo.py       # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö
‚îÇ           ‚îú‚îÄ‚îÄ train_grade_model.py  # –û–±—É—á–µ–Ω–∏–µ ML –º–æ–¥–µ–ª–∏
‚îÇ           ‚îî‚îÄ‚îÄ index_lectures.py     # –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ª–µ–∫—Ü–∏–π
‚îÇ
‚îú‚îÄ‚îÄ uniquest/                      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ Django
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ settings.py               # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ (–ø–æ–ª–Ω—ã–π –∫–æ–¥ –Ω–∏–∂–µ)
‚îÇ   ‚îú‚îÄ‚îÄ urls.py                   # –ì–ª–∞–≤–Ω—ã–µ URL –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ wsgi.py                   # WSGI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –¥–µ–ø–ª–æ—è
‚îÇ   ‚îî‚îÄ‚îÄ signals.py
‚îÇ
‚îú‚îÄ‚îÄ manage.py                     # –£–ø—Ä–∞–≤–ª—è—é—â–∏–π —Å–∫—Ä–∏–ø—Ç Django
‚îú‚îÄ‚îÄ requirements.txt              # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ Procfile                      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –¥–µ–ø–ª–æ—è
‚îú‚îÄ‚îÄ render.yaml                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Render.com
‚îú‚îÄ‚îÄ runtime.txt                   # –í–µ—Ä—Å–∏—è Python
‚îú‚îÄ‚îÄ .gitignore                    # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã Git
‚îî‚îÄ‚îÄ README.md                     # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üóÑÔ∏è –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (main/models.py)

### –ü–æ–ª–Ω—ã–π –∫–æ–¥ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π:

```python
from django.db import models
from django.contrib.auth.models import User
from django.utils import timezone
from django.core.validators import MinValueValidator, MaxValueValidator

# ----------------- Specialty (–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å) -----------------
class Specialty(models.Model):
    code = models.CharField(max_length=20, unique=True, verbose_name='–ö–æ–¥ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏')
    name_kk = models.CharField(max_length=200, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ (–∫–∞–∑)')
    name_ru = models.CharField(max_length=200, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ (—Ä—É—Å)')
    description = models.TextField(blank=True, verbose_name='–û–ø–∏—Å–∞–Ω–∏–µ')

    class Meta:
        verbose_name = '–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å'
        verbose_name_plural = '–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏'
        ordering = ['code']

    def __str__(self):
        return f"{self.code} - {self.name_ru}"

# ----------------- Subject (–ü—Ä–µ–¥–º–µ—Ç) -----------------
class Subject(models.Model):
    code = models.CharField(max_length=20, unique=True, verbose_name='–ö–æ–¥ –ø—Ä–µ–¥–º–µ—Ç–∞')
    name_kk = models.CharField(max_length=200, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ (–∫–∞–∑)')
    name_ru = models.CharField(max_length=200, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ (—Ä—É—Å)')
    credits = models.IntegerField(default=3, verbose_name='–ö—Ä–µ–¥–∏—Ç—ã')
    specialty = models.ForeignKey(Specialty, on_delete=models.CASCADE, null=True, blank=True, related_name='subjects')

    class Meta:
        verbose_name = '–ü—Ä–µ–¥–º–µ—Ç'
        verbose_name_plural = '–ü—Ä–µ–¥–º–µ—Ç—ã'
        ordering = ['code']

    def __str__(self):
        return f"{self.code} - {self.name_ru}"

# ----------------- Group (–ì—Ä—É–ø–ø–∞) -----------------
class Group(models.Model):
    name = models.CharField(max_length=50, unique=True, verbose_name="–ì—Ä—É–ø–ø–∞")
    year = models.IntegerField(verbose_name="–ì–æ–¥ –Ω–∞–±–æ—Ä–∞")
    created_at = models.DateTimeField(auto_now_add=True, verbose_name="–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è")

    class Meta:
        verbose_name = "–ì—Ä—É–ø–ø–∞"
        verbose_name_plural = "–ì—Ä—É–ø–ø—ã"
        ordering = ["-year", "name"]

    def __str__(self):
        return f"{self.name} ({self.year})"

# ----------------- Profile (–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è) -----------------
class Profile(models.Model):
    ROLE_STUDENT = 'student'
    ROLE_TEACHER = 'teacher'
    ROLE_CHOICES = [
        (ROLE_STUDENT, '–°—Ç—É–¥–µ–Ω—Ç'),
        (ROLE_TEACHER, '–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å'),
    ]

    user = models.OneToOneField(User, on_delete=models.CASCADE, related_name='profile')
    role = models.CharField(max_length=20, choices=ROLE_CHOICES, default=ROLE_STUDENT)
    group = models.ForeignKey(Group, on_delete=models.SET_NULL, null=True, blank=True, related_name='students')
    specialty = models.ForeignKey(Specialty, on_delete=models.SET_NULL, null=True, blank=True, related_name='students')
    photo = models.ImageField(upload_to='profile_photos/', blank=True, null=True)
    bio = models.TextField(blank=True)
    phone = models.CharField(max_length=20, blank=True)
    iin = models.CharField(max_length=12, blank=True)
    address = models.TextField(blank=True)
    enrollment_date = models.DateField(null=True, blank=True)

    class Meta:
        verbose_name = '–ü—Ä–æ—Ñ–∏–ª—å'
        verbose_name_plural = '–ü—Ä–æ—Ñ–∏–ª–∏'

    def __str__(self):
        return f"{self.user.get_full_name() or self.user.username} ({self.get_role_display()})"

# ----------------- Course (–ö—É—Ä—Å) -----------------
class Course(models.Model):
    name = models.CharField(max_length=200)
    code = models.CharField(max_length=20, blank=True)
    subject = models.ForeignKey(Subject, on_delete=models.SET_NULL, null=True, blank=True, related_name='courses')
    teacher = models.ForeignKey(User, on_delete=models.SET_NULL, null=True, blank=True, related_name='teaching_courses')
    description = models.TextField(blank=True)
    credits = models.IntegerField(default=3)
    semester = models.IntegerField(choices=[(1, '–û—Å–µ–Ω–Ω–∏–π'), (2, '–í–µ—Å–µ–Ω–Ω–∏–π')], default=1)
    academic_year = models.CharField(max_length=9, default='2024-2025')
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        verbose_name = '–ö—É—Ä—Å'
        verbose_name_plural = '–ö—É—Ä—Å—ã'
        ordering = ['-academic_year', 'semester', 'code']

    def __str__(self):
        return f"{self.code or ''} {self.name}".strip()

# ----------------- Student (–°—Ç—É–¥–µ–Ω—Ç) -----------------
class Student(models.Model):
    user = models.ForeignKey(User, on_delete=models.SET_NULL, null=True, blank=True, related_name='student_profile')
    first_name = models.CharField(max_length=100, verbose_name='–ò–º—è')
    last_name = models.CharField(max_length=100, verbose_name='–§–∞–º–∏–ª–∏—è')
    email = models.EmailField(unique=True, verbose_name='Email')
    group = models.ForeignKey(Group, on_delete=models.SET_NULL, null=True, blank=True, related_name='student_group')
    dob = models.DateField(null=True, blank=True, verbose_name='–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è')
    is_active = models.BooleanField(default=True, verbose_name='–ê–∫—Ç–∏–≤–µ–Ω')
    created_at = models.DateTimeField(auto_now_add=True)

    class Meta:
        verbose_name = '–°—Ç—É–¥–µ–Ω—Ç'
        verbose_name_plural = '–°—Ç—É–¥–µ–Ω—Ç—ã'
        ordering = ['last_name', 'first_name']

    def __str__(self):
        return f"{self.last_name} {self.first_name}"

# ----------------- Enrollment (–ó–∞–ø–∏—Å—å –Ω–∞ –∫—É—Ä—Å) -----------------
class Enrollment(models.Model):
    student = models.ForeignKey(Student, on_delete=models.CASCADE, related_name='enrollments')
    course = models.ForeignKey(Course, on_delete=models.CASCADE, related_name='enrollments')
    enrolled_at = models.DateTimeField(default=timezone.now, verbose_name='–î–∞—Ç–∞ –∑–∞–ø–∏—Å–∏')

    class Meta:
        verbose_name = '–ó–∞–ø–∏—Å—å –Ω–∞ –∫—É—Ä—Å'
        verbose_name_plural = '–ó–∞–ø–∏—Å–∏ –Ω–∞ –∫—É—Ä—Å—ã'
        ordering = ['-enrolled_at']
        unique_together = ['student', 'course']

    def __str__(self):
        return f"{self.student} - {self.course.name}"

# ----------------- Lecture (–õ–µ–∫—Ü–∏—è) -----------------
class Lecture(models.Model):
    course = models.ForeignKey(Course, on_delete=models.CASCADE, related_name='lectures')
    title = models.CharField(max_length=200, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ')
    content_text = models.TextField(blank=True, verbose_name='–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ')
    content_url = models.URLField(blank=True, null=True, verbose_name='–°—Å—ã–ª–∫–∞')
    vector_embedding = models.JSONField(null=True, blank=True, verbose_name='–í–µ–∫—Ç–æ—Ä–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ')
    created_at = models.DateTimeField(auto_now_add=True, verbose_name='–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è')

    class Meta:
        verbose_name = '–õ–µ–∫—Ü–∏—è'
        verbose_name_plural = '–õ–µ–∫—Ü–∏–∏'
        ordering = ['-created_at']

    def __str__(self):
        return f"{self.course.name} - {self.title}"

# ----------------- Grade (–û—Ü–µ–Ω–∫–∞) -----------------
class Grade(models.Model):
    student = models.ForeignKey(User, on_delete=models.CASCADE, related_name='grades', null=True, blank=True)
    course = models.ForeignKey(Course, on_delete=models.CASCADE, related_name='grades')
    enrollment = models.ForeignKey(Enrollment, on_delete=models.SET_NULL, null=True, blank=True, related_name='grades')
    assignment = models.ForeignKey('Assignment', on_delete=models.SET_NULL, null=True, blank=True, related_name='grades')
    assignment_name = models.CharField(max_length=200, blank=True, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è')
    value = models.DecimalField(max_digits=5, decimal_places=2, validators=[MinValueValidator(0), MaxValueValidator(100)])
    letter_grade = models.CharField(max_length=5, choices=[('A','A'),('B','B'),('C','C'),('D','D'),('F','F')], blank=True)
    date = models.DateTimeField(default=timezone.now)
    comment = models.TextField(blank=True)
    topic = models.CharField(max_length=200, blank=True)

    class Meta:
        verbose_name = '–û—Ü–µ–Ω–∫–∞'
        verbose_name_plural = '–û—Ü–µ–Ω–∫–∏'
        ordering = ['-date']

    def save(self, *args, **kwargs):
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ–º assignment_name –∏–∑ assignment, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ
        if self.assignment and not self.assignment_name:
            self.assignment_name = self.assignment.title
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ–º student –∏–∑ enrollment, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ
        if self.enrollment and not self.student:
            self.student = self.enrollment.student.user if self.enrollment.student.user else None
        if self.value is not None and not self.letter_grade:
            if self.value >= 90: self.letter_grade='A'
            elif self.value >= 80: self.letter_grade='B'
            elif self.value >= 70: self.letter_grade='C'
            elif self.value >= 60: self.letter_grade='D'
            else: self.letter_grade='F'
        super().save(*args, **kwargs)

    def __str__(self):
        student_name = self.student.username if self.student else (self.enrollment.student if self.enrollment else "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ")
        return f"{student_name} - {self.course.name} - {self.value}"

# ----------------- Assignment (–ó–∞–¥–∞–Ω–∏–µ) -----------------
class Assignment(models.Model):
    course = models.ForeignKey(Course, on_delete=models.CASCADE, related_name='assignments')
    title = models.CharField(max_length=200)
    description = models.TextField(blank=True)
    due_date = models.DateTimeField()
    max_score = models.IntegerField(default=100)
    topic = models.CharField(max_length=200, blank=True)
    assignment_type = models.CharField(
        max_length=50,
        choices=[
            ('homework', '–î–æ–º–∞—à–Ω–µ–µ –∑–∞–¥–∞–Ω–∏–µ'),
            ('project', '–ü—Ä–æ–µ–∫—Ç'),
            ('quiz', '–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞'),
            ('exam', '–≠–∫–∑–∞–º–µ–Ω'),
            ('lab', '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞')
        ],
        default='homework'
    )

    class Meta:
        verbose_name = '–ó–∞–¥–∞–Ω–∏–µ'
        verbose_name_plural = '–ó–∞–¥–∞–Ω–∏—è'
        ordering = ['-due_date']

    def __str__(self):
        return f"{self.course.name} - {self.title}"

# ----------------- Attendance (–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å) -----------------
class Attendance(models.Model):
    enrollment = models.ForeignKey(Enrollment, on_delete=models.CASCADE, related_name='attendances')
    lecture = models.ForeignKey(Lecture, on_delete=models.CASCADE, related_name='attendances', null=True, blank=True)
    date = models.DateField(verbose_name='–î–∞—Ç–∞')
    present = models.BooleanField(default=False, verbose_name='–ü—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª')

    class Meta:
        verbose_name = '–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å'
        verbose_name_plural = '–ü–æ—Å–µ—â–∞–µ–º–æ—Å—Ç—å'
        ordering = ['-date']
        unique_together = ['enrollment', 'lecture', 'date']

    def __str__(self):
        status = "–ü—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª" if self.present else "–û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª"
        return f"{self.enrollment.student} - {self.date} - {status}"
```

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (main/views.py)

### –ö–ª—é—á–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

```python
from django.shortcuts import render, redirect, get_object_or_404
from django.contrib.auth import login, authenticate, logout
from django.contrib import messages
from django.contrib.auth.decorators import login_required
from django.http import JsonResponse
from functools import wraps

# –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
def index(request):
    courses = Course.objects.all()[:6]
    return render(request, 'main/index.html', {'courses': courses})

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
def register_view(request):
    if request.method == 'POST':
        form = UserRegisterForm(request.POST)
        if form.is_valid():
            user = form.save()
            profile = Profile.objects.create(
                user=user,
                role=form.cleaned_data['role'],
                group=form.cleaned_data.get('group'),
                specialty=form.cleaned_data.get('specialty'),
                enrollment_date=timezone.now().date()
                if form.cleaned_data['role'] == Profile.ROLE_STUDENT
                else None,
            )
            if form.cleaned_data['role'] == Profile.ROLE_STUDENT:
                Student.objects.get_or_create(
                    user=user,
                    defaults={
                        "first_name": user.first_name or user.username,
                        "last_name": user.last_name or "",
                        "email": user.email or f"{user.username}@example.com",
                        "group": form.cleaned_data.get('group'),
                    },
                )
            login(request, user)
            messages.success(request, '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞. –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!')
            return redirect('dashboard')
    else:
        form = UserRegisterForm()
    return render(request, 'main/register.html', {'form': form})

# –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
def teacher_required(view_func):
    @wraps(view_func)
    def _wrapped(request, *args, **kwargs):
        if not request.user.is_authenticated:
            return redirect('login')
        if not hasattr(request.user, 'profile') or request.user.profile.role != Profile.ROLE_TEACHER:
            messages.error(request, '–î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π.')
            return redirect('dashboard')
        return view_func(request, *args, **kwargs)
    return _wrapped

# –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞
def student_required(view_func):
    @wraps(view_func)
    def _wrapped(request, *args, **kwargs):
        if not request.user.is_authenticated:
            return redirect('login')
        if not hasattr(request.user, 'profile') or request.user.profile.role != Profile.ROLE_STUDENT:
            messages.error(request, '–î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.')
            return redirect('dashboard')
        return view_func(request, *args, **kwargs)
    return _wrapped

# –ü–∞–Ω–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
@login_required
def dashboard(request):
    user = request.user
    if user.is_staff:
        # –ê–¥–º–∏–Ω—Å–∫–∏–π –¥–∞—à–±–æ—Ä–¥
        total_students = Student.objects.count()
        active_groups = Group.objects.count()
        total_courses = Course.objects.count()
        recent_enrollments = Enrollment.objects.select_related(
            "student", "course"
        ).order_by("-enrolled_at")[:10]
        return render(
            request,
            "main/dashboard.html",
            {
                "is_admin_dashboard": True,
                "total_students": total_students,
                "active_groups": active_groups,
                "total_courses": total_courses,
                "recent_enrollments": recent_enrollments,
            },
        )

    if hasattr(user, 'profile') and user.profile.role == Profile.ROLE_TEACHER:
        return redirect('teacher_dashboard')

    # –î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
    courses = Course.objects.all()
    user_grades = Grade.objects.filter(student=user).select_related('course')
    avg_score = user_grades.aggregate(avg=Avg('value'))['avg'] or 0
    recent_grades = user_grades[:5]
    upcoming_assignments = Assignment.objects.filter(
        course__in=courses,
        due_date__gte=timezone.now()
    ).order_by('due_date')[:5]

    return render(request, 'main/dashboard.html', {
        'courses': courses,
        'user_grades': user_grades,
        'avg_score': avg_score,
        'recent_grades': recent_grades,
        'upcoming_assignments': upcoming_assignments,
        'is_admin_dashboard': False,
    })

# –ü–∞–Ω–µ–ª—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
@login_required
@teacher_required
def teacher_dashboard(request):
    user = request.user
    courses = Course.objects.filter(teacher=user).select_related('subject')
    grade_form = TeacherGradeForm(teacher=user)
    lecture_form = LectureCreateForm(teacher=user)

    if request.method == "POST":
        action = request.POST.get("action")
        if action == "add_grade":
            grade_form = TeacherGradeForm(request.POST, teacher=user)
            if grade_form.is_valid():
                enrollment = grade_form.cleaned_data["enrollment"]
                student_user = getattr(enrollment.student, "user", None)
                if not student_user:
                    messages.error(request, "–î–ª—è —ç—Ç–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.")
                else:
                    grade = grade_form.save(commit=False)
                    grade.course = enrollment.course
                    grade.student = student_user
                    grade.date = timezone.now()
                    grade.save()
                    messages.success(request, "–û—Ü–µ–Ω–∫–∞ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞.")
                    return redirect("teacher_dashboard")
        elif action == "add_resource":
            lecture_form = LectureCreateForm(request.POST, teacher=user)
            if lecture_form.is_valid():
                lecture_form.save()
                messages.success(request, "–õ–µ–∫—Ü–∏—è/—Ä–µ—Å—É—Ä—Å –¥–æ–±–∞–≤–ª–µ–Ω—ã.")
                return redirect("teacher_dashboard")

    total_students = User.objects.filter(
        profile__role=Profile.ROLE_STUDENT,
        grades__course__teacher=user
    ).distinct().count()
    
    total_grades = Grade.objects.filter(course__teacher=user).count()
    avg_score = Grade.objects.filter(course__teacher=user).aggregate(avg=Avg('value'))['avg'] or 0
    recent_grades = Grade.objects.filter(course__teacher=user).select_related('student', 'course').order_by('-date')[:10]
    
    return render(request, 'main/teacher_dashboard.html', {
        'courses': courses,
        'total_students': total_students,
        'total_grades': total_grades,
        'avg_score': avg_score,
        'recent_grades': recent_grades,
        'grade_form': grade_form,
        'lecture_form': lecture_form,
    })

# API –¥–ª—è ML –ø—Ä–æ–≥–Ω–æ–∑–∞ –æ—Ü–µ–Ω–∫–∏
@login_required
@staff_required
def api_predict_grade(request):
    if request.method != "POST":
        return JsonResponse({"detail": "–¢–æ–ª—å–∫–æ POST"}, status=405)
    try:
        payload = json.loads(request.body.decode("utf-8"))
    except Exception:
        return JsonResponse({"detail": "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON"}, status=400)

    student_id = payload.get("student_id")
    course_id = payload.get("course_id")
    if not student_id or not course_id:
        return JsonResponse({"detail": "–ù—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å student_id –∏ course_id"}, status=400)

    try:
        enrollment = Enrollment.objects.get(student_id=student_id, course_id=course_id)
    except Enrollment.DoesNotExist:
        return JsonResponse({"detail": "–ó–∞–ø–∏—Å—å —Å—Ç—É–¥–µ–Ω—Ç–∞ –Ω–∞ –∫—É—Ä—Å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"}, status=404)

    # –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—É—á–µ–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏
    from pathlib import Path
    model_path = Path("models/grade_model.pkl")
    if not model_path.exists():
        return JsonResponse({"detail": "–ú–æ–¥–µ–ª—å –µ—â—ë –Ω–µ –æ–±—É—á–µ–Ω–∞."}, status=503)

    import joblib
    bundle = joblib.load(model_path)
    model = bundle["model"]
    scaler = bundle["scaler"]
    feature_names = bundle["feature_names"]

    # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤
    grades_qs = Grade.objects.filter(enrollment=enrollment)
    att_qs = Attendance.objects.filter(enrollment=enrollment)
    
    # –†–∞—Å—á–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –¥–ª—è –ø—Ä–æ–≥–Ω–æ–∑–∞
    attendance_rate = 1.0
    if att_qs.exists():
        total = att_qs.count()
        present = att_qs.filter(present=True).count()
        attendance_rate = present / total if total else 1.0

    hw_avg = grades_qs.filter(assignment_name__icontains="–î–æ–º–∞—à–Ω–µ–µ").aggregate(avg=Avg("value"))["avg"] or 0
    midterm = grades_qs.filter(assignment_name__icontains="Midterm").order_by("-date").first()
    midterm_score = float(midterm.value) if midterm else float(hw_avg)

    previous_grades = Grade.objects.filter(
        student=enrollment.student.user if enrollment.student.user else None
    ).exclude(course=enrollment.course)
    previous_gpa = float(previous_grades.aggregate(avg=Avg("value"))["avg"] or 0) if previous_grades.exists() else float(hw_avg)

    features = [
        float(attendance_rate * 100.0),
        float(hw_avg),
        float(midterm_score),
        float(previous_gpa),
    ]

    x = scaler.transform([features])
    pred = float(model.predict(x)[0])

    return JsonResponse({
        "predicted_final_grade": pred,
        "model_confidence": 0.8,
        "feature_contributions": {
            "attendance": float(attendance_rate * 100),
            "homework_avg": float(hw_avg),
            "midterm": float(midterm_score),
            "previous_gpa": float(previous_gpa),
        }
    })
```

---

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ (uniquest/settings.py)

### –ü–æ–ª–Ω—ã–π –∫–æ–¥ –Ω–∞—Å—Ç—Ä–æ–µ–∫:

```python
import os
from pathlib import Path
from django.core.management.utils import get_random_secret_key
from dotenv import load_dotenv

# –ó–∞–≥—Ä—É–∂–∞–µ–º .env
load_dotenv()

# --- –ü–£–¢–ò ---
BASE_DIR = Path(__file__).resolve().parent.parent

# --- –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ ---
SECRET_KEY = os.environ.get('SECRET_KEY', get_random_secret_key())
DEBUG = os.environ.get('DEBUG', 'True') == 'True'

# --- ALLOWED_HOSTS ---
ALLOWED_HOSTS_ENV = os.environ.get('ALLOWED_HOSTS', '')
if ALLOWED_HOSTS_ENV:
    ALLOWED_HOSTS = [host.strip() for host in ALLOWED_HOSTS_ENV.split(',')]
else:
    ALLOWED_HOSTS = ['*']

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ö–æ—Å—Ç–æ–≤ Render
render_host = os.environ.get('RENDER_EXTERNAL_HOSTNAME')
if render_host:
    if render_host not in ALLOWED_HOSTS:
        ALLOWED_HOSTS.append(render_host)
    if '*.onrender.com' not in ALLOWED_HOSTS:
        ALLOWED_HOSTS.append('*.onrender.com')

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–ª—è production
if not DEBUG:
    SECURE_SSL_REDIRECT = True
    SESSION_COOKIE_SECURE = True
    CSRF_COOKIE_SECURE = True
    SECURE_BROWSER_XSS_FILTER = True
    SECURE_CONTENT_TYPE_NOSNIFF = True
    X_FRAME_OPTIONS = 'DENY'

# --- –£–°–¢–ê–ù–û–í–õ–ï–ù–ù–´–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ---
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'main',
]

# --- –ú–ò–î–õ–í–ê–† ---
MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'whitenoise.middleware.WhiteNoiseMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'uniquest.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [BASE_DIR / 'templates'],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_processors': [
                'django.template.context_processors.debug',
                'django.template.context_processors.request',
                'django.contrib.auth.context_processors.auth',
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]

WSGI_APPLICATION = 'uniquest.wsgi.application'

# --- –ë–ê–ó–ê –î–ê–ù–ù–´–• ---
# –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: DATABASE_URL (–æ—Ç Render) > –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ > –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql',
        'NAME': os.environ.get('DB_NAME', 'uniquestus'),
        'USER': os.environ.get('DB_USER', 'uniquest_user'),
        'PASSWORD': os.environ.get('DB_PASSWORD', ''),
        'HOST': os.environ.get('DB_HOST', 'localhost'),
        'PORT': os.environ.get('DB_PORT', '5432'),
        'OPTIONS': {
            'connect_timeout': 10,
        },
        'CONN_MAX_AGE': 600,
    }
}

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ DATABASE_URL –æ—Ç Render (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
if 'DATABASE_URL' in os.environ:
    try:
        import dj_database_url
        DATABASES['default'] = dj_database_url.config(
            default=os.environ.get('DATABASE_URL'),
            conn_max_age=600,
            conn_health_checks=True,
        )
    except ImportError:
        # –ï—Å–ª–∏ dj-database-url –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –ø–∞—Ä—Å–∏–º –≤—Ä—É—á–Ω—É—é
        import urllib.parse
        db_url = os.environ.get('DATABASE_URL')
        if db_url:
            parsed = urllib.parse.urlparse(db_url)
            DATABASES['default'] = {
                'ENGINE': 'django.db.backends.postgresql',
                'NAME': parsed.path[1:] if parsed.path.startswith('/') else parsed.path,
                'USER': parsed.username,
                'PASSWORD': parsed.password,
                'HOST': parsed.hostname,
                'PORT': parsed.port or '5432',
                'OPTIONS': {
                    'connect_timeout': 10,
                },
                'CONN_MAX_AGE': 600,
            }

# --- –ü–ê–†–û–õ–ò ---
AUTH_PASSWORD_VALIDATORS = [
    {'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator'},
    {'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator'},
    {'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator'},
    {'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator'},
]

# --- –õ–û–ö–ê–õ–¨–ù–´–ï –ù–ê–°–¢–†–û–ô–ö–ò ---
LANGUAGE_CODE = 'ru-ru'
TIME_ZONE = 'Asia/Almaty'
USE_I18N = True
USE_L10N = True
USE_TZ = True

# --- –°–¢–ê–¢–ò–ö–ê ---
STATIC_URL = '/static/'
STATICFILES_DIRS = [BASE_DIR / 'static']
STATIC_ROOT = BASE_DIR / 'staticfiles'
STATICFILES_STORAGE = 'whitenoise.storage.CompressedManifestStaticFilesStorage'

# --- –ú–ï–î–ò–ê ---
MEDIA_URL = '/media/'
MEDIA_ROOT = BASE_DIR / 'media'

DEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'
```

---

## üîó URL –º–∞—Ä—à—Ä—É—Ç—ã

### –ì–ª–∞–≤–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (uniquest/urls.py):

```python
from django.contrib import admin
from django.urls import path, include
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('main.urls')),
]

# –î–ª—è —Ä–∞–∑–¥–∞—á–∏ –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤ –≤ development
if settings.DEBUG:
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
    urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)
```

### –ú–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (main/urls.py):

```python
from django.urls import path
from . import views

urlpatterns = [
    path('', views.index, name='index'),
    path('register/', views.register_view, name='register'),
    path('login/', views.login_view, name='login'),
    path('logout/', views.logout_view, name='logout'),

    path('dashboard/', views.dashboard, name='dashboard'),
    path('profile/', views.profile_view, name='profile'),
    path('schedule/', views.schedule_view, name='schedule'),
    path('grades/', views.grades_view, name='grades'),

    path('course/<int:pk>/', views.course_detail, name='course_detail'),

    path('teacher/dashboard/', views.teacher_dashboard, name='teacher_dashboard'),
    path('teacher/courses/', views.teacher_courses, name='teacher_courses'),
    path('teacher/grades/', views.teacher_grades, name='teacher_grades'),
    path('teacher/schedule/', views.teacher_schedule, name='teacher_schedule'),
    path('teacher/ai-analysis/<int:student_id>/<int:course_id>/', views.ai_analysis_view, name='ai_analysis'),

    # –ü—É–±–ª–∏—á–Ω—ã–µ –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    path('groups/<int:group_id>/schedule/', views.group_schedule, name='group_schedule'),
    path('students/<int:pk>/profile/', views.student_public_profile, name='student_public_profile'),
    path('courses/<int:pk>/lectures/', views.course_lectures, name='course_lectures'),
    path('lectures/<int:pk>/', views.lecture_detail, name='lecture_detail'),
    path('demo/', views.demo_page, name='demo_page'),

    # API –¥–ª—è ML
    path('api/predict_grade/', views.api_predict_grade, name='api_predict_grade'),
    path('api/search_resources/', views.api_search_resources, name='api_search_resources'),
    path('api/retrain_embeddings/', views.api_retrain_embeddings, name='api_retrain_embeddings'),
]
```

---

## üìù –§–æ—Ä–º—ã (main/forms.py)

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–æ—Ä–º—ã:

```python
from django import forms
from django.contrib.auth.models import User
from django.contrib.auth.forms import UserCreationForm
from .models import Profile, Specialty, Grade, Enrollment, Course, Lecture, Group

# –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
class UserRegisterForm(UserCreationForm):
    email = forms.EmailField(required=True, label='Email')
    first_name = forms.CharField(required=False, label='–ò–º—è')
    last_name = forms.CharField(required=False, label='–§–∞–º–∏–ª–∏—è')
    role = forms.ChoiceField(choices=Profile.ROLE_CHOICES, required=True, label='–†–æ–ª—å')
    group = forms.ModelChoiceField(
        queryset=Group.objects.all(),
        required=False,
        label='–ì—Ä—É–ø–ø–∞',
        help_text='–£—á–µ–±–Ω–∞—è –≥—Ä—É–ø–ø–∞ (–¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤)'
    )
    specialty = forms.ModelChoiceField(
        queryset=Specialty.objects.all(),
        required=False,
        label='–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å',
        help_text='–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å (–¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤)'
    )

    class Meta:
        model = User
        fields = ['username', 'first_name', 'last_name', 'email', 'role', 'group', 'specialty', 'password1', 'password2']
        labels = {'username': '–õ–æ–≥–∏–Ω'}

# –§–æ—Ä–º–∞ –≤—ã—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ—Ü–µ–Ω–∫–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º
class TeacherGradeForm(forms.ModelForm):
    class Meta:
        model = Grade
        fields = ['enrollment', 'assignment', 'value', 'topic', 'comment']
        labels = {
            'enrollment': '–°—Ç—É–¥–µ–Ω—Ç –∏ –∫—É—Ä—Å',
            'assignment': '–ó–∞–¥–∞–Ω–∏–µ',
            'value': '–ë–∞–ª–ª',
            'topic': '–¢–µ–º–∞',
            'comment': '–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π',
        }
        widgets = {'comment': forms.Textarea(attrs={'rows': 2})}

    def __init__(self, *args, teacher=None, **kwargs):
        super().__init__(*args, **kwargs)
        self.teacher = teacher
        qs = Enrollment.objects.select_related('student__user', 'course')
        if teacher:
            qs = qs.filter(course__teacher=teacher)
        self.fields['enrollment'].queryset = qs
        self.fields['enrollment'].label_from_instance = lambda enr: f"{enr.student.last_name} {enr.student.first_name} ‚Äî {enr.course.name}"

# –°–æ–∑–¥–∞–Ω–∏–µ –ª–µ–∫—Ü–∏–∏/—Ä–µ—Å—É—Ä—Å–∞
class LectureCreateForm(forms.ModelForm):
    class Meta:
        model = Lecture
        fields = ['course', 'title', 'content_text', 'content_url']
        labels = {
            'course': '–ö—É—Ä—Å',
            'title': '–ù–∞–∑–≤–∞–Ω–∏–µ –ª–µ–∫—Ü–∏–∏/—Ä–µ—Å—É—Ä—Å–∞',
            'content_text': '–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ',
            'content_url': '–°—Å—ã–ª–∫–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)',
        }
        widgets = {'content_text': forms.Textarea(attrs={'rows': 4})}

    def __init__(self, *args, teacher=None, **kwargs):
        super().__init__(*args, **kwargs)
        qs = Course.objects.all()
        if teacher:
            qs = qs.filter(teacher=teacher)
        self.fields['course'].queryset = qs
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:

- **Django 5.2.7** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **PostgreSQL** - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Python 3.13** - —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- **Bootstrap 5** - CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Gunicorn** - WSGI —Å–µ—Ä–≤–µ—Ä –¥–ª—è production
- **WhiteNoise** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤

### ML/AI –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:

- **scikit-learn** - –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ
- **numpy** - —á–∏—Å–ª–µ–Ω–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- **sentence-transformers** - —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
- **torch** - –≥–ª—É–±–æ–∫–æ–µ –æ–±—É—á–µ–Ω–∏–µ
- **joblib** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π

### –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (requirements.txt):

```
Django==5.2.7
gunicorn==23.0.0
psycopg2-binary==2.9.11
dj-database-url==3.0.1
whitenoise==6.11.0
python-dotenv==1.2.1
numpy
scikit-learn
joblib
sentence-transformers
rank-bm25
```

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Render

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (render.yaml):

```yaml
services:
  - type: web
    name: uniquest-web
    env: python
    plan: free
    buildCommand: pip install -r requirements.txt && python manage.py collectstatic --noinput
    startCommand: python manage.py migrate --noinput && gunicorn uniquest.wsgi:application
    healthCheckPath: /
    envVars:
      - key: PYTHON_VERSION
        value: 3.10.12
      - key: DJANGO_SETTINGS_MODULE
        value: uniquest.settings
      - key: DEBUG
        value: False
      - key: SECRET_KEY
        generateValue: true
      - key: ALLOWED_HOSTS
        value: uniquest.onrender.com,*.onrender.com
      - key: DATABASE_URL
        fromDatabase:
          name: uniquest1-db
          property: connectionString
```

---

## üìä –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã

### –î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ü–µ–Ω–æ–∫ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∫—É—Ä—Å–æ–≤ –∏ –ª–µ–∫—Ü–∏–π
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º

### –î–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π:
- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–∞–º–∏
- –í—ã—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ü–µ–Ω–æ–∫
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ª–µ–∫—Ü–∏–π –∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- AI –∞–Ω–∞–ª–∏–∑ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç–∏

### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
- –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö
- –û–±—É—á–µ–Ω–∏–µ ML –º–æ–¥–µ–ª–µ–π
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ª–µ–∫—Ü–∏–π

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –∫–ª—é—á–µ–π
- CSRF –∑–∞—â–∏—Ç–∞
- XSS –∑–∞—â–∏—Ç–∞
- SSL —Ä–µ–¥–∏—Ä–µ–∫—Ç –≤ production
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –ø–æ —Ä–æ–ª—è–º (—Å—Ç—É–¥–µ–Ω—Ç/–ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å/–∞–¥–º–∏–Ω)

---

## üìà ML/AI —Ñ—É–Ω–∫—Ü–∏–∏

1. **–ü—Ä–æ–≥–Ω–æ–∑ –∏—Ç–æ–≥–æ–≤–æ–π –æ—Ü–µ–Ω–∫–∏** - –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Å–µ—â–∞–µ–º–æ—Å—Ç–∏, –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π, midterm –∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ GPA
2. **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫** - –ø–æ–∏—Å–∫ –ø–æ –ª–µ–∫—Ü–∏—è–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º embeddings
3. **–ê–Ω–∞–ª–∏–∑ —É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç–∏** - –≤—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ç–µ–º –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

---

## üìù –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–µ–º–æ-–¥–∞–Ω–Ω—ã—Ö
python manage.py seed_demo --students 500 --groups 20 --courses 30

# –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –ø—Ä–æ–≥–Ω–æ–∑–∞ –æ—Ü–µ–Ω–æ–∫
python manage.py train_grade_model --save-path=models/grade_model.pkl

# –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ª–µ–∫—Ü–∏–π –¥–ª—è –ø–æ–∏—Å–∫–∞
python manage.py index_lectures
```

---

## üåê URL —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

- `/` - –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `/register/` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `/login/` - –≤—Ö–æ–¥
- `/dashboard/` - –ø–∞–Ω–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `/course/<id>/` - –¥–µ—Ç–∞–ª–∏ –∫—É—Ä—Å–∞
- `/teacher/dashboard/` - –ø–∞–Ω–µ–ª—å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
- `/api/predict_grade/` - API –ø—Ä–æ–≥–Ω–æ–∑–∞ –æ—Ü–µ–Ω–∫–∏
- `/api/search_resources/` - API –ø–æ–∏—Å–∫–∞

---

**–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π.**
**–í–µ—Ä—Å–∏—è:** 1.0
**–î–∞—Ç–∞:** –î–µ–∫–∞–±—Ä—å 2025

