{% extends 'main/base.html' %}

{% block title %}Лекции курса {{ course.name }}{% endblock %}

{% block content %}
<div class="container mt-4">
  <h1 class="mb-3">Лекции курса «{{ course.name }}»</h1>

  <form method="get" class="row g-2 mb-3">
    <div class="col-md-8">
      <input type="text" class="form-control" name="q" placeholder="Поиск по лекциям (семантический)" value="{{ q }}">
    </div>
    <div class="col-md-4">
      <button class="btn btn-primary" type="submit">Искать</button>
    </div>
  </form>

  {% if q and search_results %}
  <div class="mb-4">
    <h5>Результаты поиска по запросу «{{ q }}»</h5>
    <ul class="list-group">
      {% for item in search_results %}
      <li class="list-group-item">
        <a href="{% url 'lecture_detail' item.id %}"><strong>{{ item.title }}</strong></a>
        <p class="mb-1 text-muted">{{ item.snippet }}</p>
      </li>
      {% endfor %}
    </ul>
  </div>
  {% elif q %}
  <p>По запросу «{{ q }}» ничего не найдено.</p>
  {% endif %}

  <h3>Все лекции курса</h3>
  <ul class="list-group">
    {% for lecture in lectures %}
    <li class="list-group-item">
      <a href="{% url 'lecture_detail' lecture.id %}">
        {{ lecture.title }}
      </a>
      <span class="text-muted"> — {{ lecture.created_at|date:"d.m.Y" }}</span>
    </li>
    {% empty %}
    <li class="list-group-item">Для курса пока нет лекций.</li>
    {% endfor %}
  </ul>
</div>
{% endblock %}



