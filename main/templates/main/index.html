{% extends 'main/base.html' %}
{% load static %}
{% block title %}Главная — UniQuest{% endblock %}

{% block hero %}
  <div class="hero-card p-5 rounded fade-in-up">
    <div class="row align-items-center">
      <div class="col-lg-6">
        <h1 class="display-4 mb-4 indie-accent">
          Учись.<br>
          Исследуй.<br>
          Достигай.
        </h1>
        <p class="lead mb-4">
          Расширяй свои знания с UniQuest — твоим надежным образовательным спутником. 
          Открывай новые горизонты в обучении с нашей инновационной платформой, созданной для студентов и преподавателей.
        </p>
        {% if not user.is_authenticated %}
          <div class="d-flex flex-wrap gap-3">
            <a href="{% url 'register' %}" class="btn btn-primary btn-lg">
              <i class="fas fa-rocket me-2"></i>Начать
            </a>
            <a href="{% url 'login' %}" class="btn btn-outline-light btn-lg">
              <i class="fas fa-sign-in-alt me-2"></i>Войти
            </a>
          </div>
        {% else %}
          <a href="{% url 'dashboard' %}" class="btn btn-primary btn-lg">
            <i class="fas fa-tachometer-alt me-2"></i>Перейти в панель управления
          </a>
        {% endif %}
      </div>
      <div class="col-lg-6 text-center">
        <div class="indie-illustration">
          <div class="desk-scene">
            <div class="desk-lamp"></div>
            <div class="books-stack"></div>
            <div class="notebook"></div>
            <div class="coffee-mug"></div>
            <div class="pencil"></div>
            <div class="sparkle"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block content %}
  <!-- Why UniQuest Section -->
  <section class="py-5 section-bg">
    <div class="text-center mb-5">
      <h2 class="indie-accent sparkle">Why UniQuest?</h2>
      <div class="decorative-line mx-auto"></div>
    </div>
    
    <div class="row g-4">
      <div class="col-md-4">
        <div class="card h-100 pixel-decoration vintage-paper">
          <div class="card-body text-center p-4">
            <div class="feature-icon mb-3 pixel-icon">
              <i class="fas fa-chalkboard-teacher fa-3x text-primary"></i>
            </div>
            <h5 class="card-title">Опытные преподаватели</h5>
            <p class="card-text">Учитесь у экспертов отрасли и увлеченных педагогов, которые привносят реальный опыт в аудиторию.</p>
          </div>
        </div>
      </div>
      
      <div class="col-md-4">
        <div class="card h-100 pixel-decoration vintage-paper">
          <div class="card-body text-center p-4">
            <div class="feature-icon mb-3 pixel-icon">
              <i class="fas fa-books fa-3x text-primary"></i>
            </div>
            <h5 class="card-title">Разнообразные курсы</h5>
            <p class="card-text">Изучайте широкий спектр предметов и дисциплин, адаптированных под ваши академические и профессиональные цели.</p>
          </div>
        </div>
      </div>
      
      <div class="col-md-4">
        <div class="card h-100 pixel-decoration vintage-paper">
          <div class="card-body text-center p-4">
            <div class="feature-icon mb-3 pixel-icon">
              <i class="fas fa-clock fa-3x text-primary"></i>
            </div>
            <h5 class="card-title">Гибкое обучение</h5>
            <p class="card-text">Учитесь в своем темпе, в любое время и в любом месте. Сочетайте образование со своим образом жизни.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Courses Section -->
  <section class="py-5 bg-pattern">
    <div class="row align-items-center mb-5">
      <div class="col-md-6">
        <h2 class="indie-accent">Рекомендуемые курсы</h2>
        <div class="decorative-line"></div>
      </div>
      <div class="col-md-6 text-end">
        <div class="mini-illustration sparkle">
          <i class="fas fa-graduation-cap fa-2x text-primary"></i>
        </div>
      </div>
    </div>
    
    <div class="row g-4">
      {% for course in courses %}
        <div class="col-md-4">
          <div class="card course-card h-100 hand-drawn">
            {% if course.image %}
              <img src="{{ course.image.url }}" class="card-img-top" alt="{{ course.name }}">
            {% else %}
              <div class="card-img-top bg-primary d-flex align-items-center justify-content-center" style="height: 200px;">
                <i class="fas fa-book fa-3x text-light"></i>
              </div>
            {% endif %}
            <div class="card-body">
              <h5 class="card-title">{{ course.name }}</h5>
              <p class="card-text">{{ course.description|truncatechars:120 }}</p>
              {% if course.code %}
                <small class="text-muted">Код: {{ course.code }}</small>
              {% endif %}
              {% if course.subject %}
                <br><small class="text-muted">{{ course.subject.code }}</small>
              {% endif %}
              <div class="mt-3">
                <a href="{% url 'course_detail' course.pk %}" class="btn btn-outline-primary btn-sm">
                  <i class="fas fa-eye me-1"></i>Подробнее
                </a>
              </div>
            </div>
          </div>
        </div>
      {% empty %}
        <div class="col-12">
          <div class="alert alert-info text-center">
            <i class="fas fa-info-circle fa-2x mb-3"></i>
            <h5>Курсы пока недоступны</h5>
            <p>Скоро появятся новые интересные курсы!</p>
          </div>
        </div>
      {% endfor %}
    </div>
  </section>

  <!-- Call to Action Section -->
  {% if not user.is_authenticated %}
  <section class="py-5 text-center wood-texture">
    <div class="card pixel-decoration vintage-paper">
      <div class="card-body p-5">
        <h3 class="indie-accent sparkle">Готовы начать свой путь?</h3>
        <p class="lead mb-4">Присоединяйтесь к тысячам студентов, которые уже учатся с UniQuest</p>
        <a href="{% url 'register' %}" class="btn btn-primary btn-lg">
          <i class="fas fa-user-plus me-2 pixel-icon"></i>Создать аккаунт
        </a>
      </div>
    </div>
  </section>
  {% endif %}
{% endblock %}

{% block extra_head %}
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  
  <!-- Custom Indie Illustration Styles -->
  <style>
    .indie-illustration {
      position: relative;
      height: 300px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .desk-scene {
      position: relative;
      width: 250px;
      height: 200px;
      background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
      border-radius: 10px;
      box-shadow: 0 10px 30px rgba(139, 69, 19, 0.3);
    }
    
    .desk-lamp {
      position: absolute;
      top: 20px;
      right: 30px;
      width: 40px;
      height: 60px;
      background: linear-gradient(135deg, #D2691E 0%, #CD853F 100%);
      border-radius: 20px 20px 5px 5px;
      box-shadow: 0 5px 15px rgba(210, 105, 30, 0.4);
    }
    
    .desk-lamp::before {
      content: '';
      position: absolute;
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 30px;
      height: 20px;
      background: #F5F1E8;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(245, 241, 232, 0.8);
    }
    
    .books-stack {
      position: absolute;
      bottom: 20px;
      left: 20px;
      width: 60px;
      height: 80px;
      background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
      border-radius: 5px;
      box-shadow: 0 5px 15px rgba(139, 69, 19, 0.3);
    }
    
    .books-stack::before {
      content: '';
      position: absolute;
      top: 10px;
      left: -5px;
      width: 60px;
      height: 60px;
      background: linear-gradient(135deg, #8FBC8F 0%, #6B8E6B 100%);
      border-radius: 5px;
      box-shadow: 0 5px 15px rgba(143, 188, 143, 0.3);
    }
    
    .notebook {
      position: absolute;
      top: 50px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 100px;
      background: #F5F1E8;
      border-radius: 5px;
      box-shadow: 0 5px 15px rgba(245, 241, 232, 0.3);
    }
    
    .notebook::before {
      content: '';
      position: absolute;
      top: 10px;
      left: 10px;
      width: 60px;
      height: 80px;
      background: repeating-linear-gradient(
        transparent,
        transparent 8px,
        rgba(139, 69, 19, 0.1) 8px,
        rgba(139, 69, 19, 0.1) 9px
      );
    }
    
    .coffee-mug {
      position: absolute;
      bottom: 30px;
      right: 20px;
      width: 25px;
      height: 35px;
      background: linear-gradient(135deg, #D2691E 0%, #CD853F 100%);
      border-radius: 0 0 12px 12px;
      box-shadow: 0 5px 15px rgba(210, 105, 30, 0.3);
    }
    
    .pencil {
      position: absolute;
      top: 80px;
      left: 30px;
      width: 60px;
      height: 4px;
      background: linear-gradient(90deg, #DAA520 0%, #8B4513 100%);
      border-radius: 2px;
      transform: rotate(-15deg);
      box-shadow: 0 2px 8px rgba(218, 165, 32, 0.3);
    }
    
    .sparkle {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 20px;
      height: 20px;
      background: radial-gradient(circle, #DAA520 0%, transparent 70%);
      border-radius: 50%;
      animation: sparkle 2s ease-in-out infinite;
    }
    
    @keyframes sparkle {
      0%, 100% { opacity: 0.3; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.2); }
    }
    
    .mini-illustration {
      opacity: 0.7;
    }
    
    .feature-icon {
      color: var(--primary-brown);
    }
  </style>
{% endblock %}
